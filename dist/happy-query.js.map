{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap e7bdfce3f98ccc4088aa","webpack:///./src/index.js","webpack:///./src/RuleBuilder.js","webpack:///./src/Evaluator.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,iBAAgB,eAAe;AAC/B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,6B;;;;;;ACzBA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA,8B;;;;;;ACpFA;AACA;AACA;AACA,MAAK;AACL;AACA,qBAAoB,uBAAuB;AAC3C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAK;AACL;AACA,qBAAoB,uBAAuB;AAC3C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,qBAAoB,uBAAuB;AAC3C;AACA;AACA;;AAEA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,E","file":"happy-query.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"HappyQuery\"] = factory();\n\telse\n\t\troot[\"HappyQuery\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap e7bdfce3f98ccc4088aa\n **/","var RuleBuilder = require('./RuleBuilder')\r\nvar Evaluator = require('./Evaluator');\r\n\r\nvar HappyQuery = {};\r\n\r\nHappyQuery.RuleBuilder = RuleBuilder;\r\n\r\nHappyQuery.evaluate = function(rule, target) {\r\n    return Evaluator.evaluate(rule, target);\r\n}\r\n\r\nHappyQuery.filter = function(rule, data) {\r\n    var result = [];\r\n\r\n    for(var i=0; i<data.length; i++)\r\n    {\r\n        if(HappyQuery.evaluate(rule, data[i]))\r\n        {\r\n            result.push(data[i])\r\n        }\r\n    }\r\n\r\n    return result;\r\n}\r\n\r\nmodule.exports = HappyQuery;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/index.js\n ** module id = 0\n ** module chunks = 0 1\n **/","var RuleBuilder = {};\r\n\r\nvar Or = function() {\r\n    this.condition = \"or\";\r\n    this.rules = Array.prototype.slice.call(arguments);\r\n\r\n    return this;\r\n}\r\n\r\nvar And = function() {\r\n    this.condition = \"and\";\r\n    this.rules = Array.prototype.slice.call(arguments);\r\n\r\n    return this;\r\n}\r\n\r\nvar Always = function() {\r\n    this.operator = \"always\"\r\n\r\n    return this;\r\n}\r\n\r\n\r\nvar Operator = function(operator, field, value) {\r\n    this.operator = operator;\r\n    this.field = field;\r\n\r\n    if(value !== undefined)\r\n        this.value = value;\r\n\r\n    return this;\r\n}\r\n\r\nRuleBuilder.And = function() {\r\n    var self = {};\r\n    And.apply(self, arguments);\r\n\r\n    return self;\r\n}\r\n\r\nRuleBuilder.Or = function() {\r\n    var self = {};\r\n\r\n    Or.apply(self, arguments);\r\n\r\n    return self;\r\n}\r\n\r\nRuleBuilder.Not = function(rule) {\r\n    return {\r\n        condition: \"not\",\r\n        rule: rule\r\n    };\r\n}\r\n\r\nRuleBuilder.Bool = function(field) {\r\n    return new Operator('bool', field);\r\n}\r\n\r\nRuleBuilder.Equal = function(field, value) {\r\n    return new Operator('equal', field, value);\r\n}\r\n\r\nRuleBuilder.GreaterThan = function(field, value) {\r\n    return new Operator('gt', field, value);\r\n}\r\n\r\nRuleBuilder.OneOf = function(field, value) {\r\n    return new Operator('oneOf', field, value);\r\n}\r\n\r\nRuleBuilder.IsEmpty = function(field) {\r\n    return new Operator('isEmpty', field);\r\n}\r\n\r\nRuleBuilder.Always = function() {\r\n    return new Always();\r\n}\r\n\r\nRuleBuilder.NestedRule = function(field, rule) {\r\n    return new Operator('nested', field, rule);\r\n}\r\n\r\n\r\nmodule.exports = RuleBuilder;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/RuleBuilder.js\n ** module id = 1\n ** module chunks = 0 1\n **/","var Condition = {\r\n    'not': function(rule, target) {\r\n        return !evaluate(rule.rule, target);\r\n    },\r\n    'or': function(rule, target) {\r\n        for(var i=0; i < rule.rules.length; i++)\r\n        {\r\n            if(evaluate(rule.rules[i], target))\r\n            {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    },\r\n    'and': function(rule, target) {\r\n        for(var i=0; i < rule.rules.length; i++)\r\n        {\r\n            if(!evaluate(rule.rules[i], target))\r\n            {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        return true;\r\n    }\r\n}\r\n\r\nvar Operator = {\r\n    'bool': function(rule, target) {\r\n        return (getValue(rule.field, target) === true)\r\n    },\r\n    'gt': function(rule, target) {\r\n        return getValue(rule.field, target) > rule.value;\r\n    },\r\n    'oneOf': function(rule, target) {\r\n        var value = getValue(rule.field, target);\r\n        for(var i=0; i < rule.value.length; i++) {\r\n            if(rule.value[i] === value)\r\n                return true;\r\n        }\r\n\r\n        return false;\r\n    },\r\n    'equal': function(rule, target) {\r\n        return getValue(rule.field, target) === rule.value;\r\n    },\r\n    'isEmpty': function(rule, target) {\r\n        return getValue(rule.field, target).length === 0;\r\n    },\r\n    'always': function(rule, target) {\r\n        return true;\r\n    },\r\n    'nested': function(rule, target) {\r\n        return evaluate(rule.value, getValue(rule.field, target));\r\n    }\r\n\r\n}\r\n\r\nvar getValue = function(field, target) {\r\n    var value = target[field];\r\n\r\n    if(value === undefined)\r\n        throw new Error('Field can\\'t be undefined: ' + field);\r\n\r\n    return value;\r\n}\r\n\r\nvar evaluate = function(rule, target) {\r\n    if(rule.condition)\r\n        return Condition[rule.condition].call(null, rule, target)\r\n\r\n    return Operator[rule.operator].call(null, rule, target)\r\n}\r\n\r\nmodule.exports = {\r\n    evaluate: evaluate\r\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/Evaluator.js\n ** module id = 2\n ** module chunks = 0 1\n **/"],"sourceRoot":""}